<template>
  <section id="section2">
    <!-- <div class="txt visible">
      <h3>Faster &amp; higher conversion</h3>
      <p>
        Distribute your inside sales leads automatically from your online forms
        and directly to your designated call center.
      </p>
    </div> -->

    <svg
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 1440 900"
    >
      <!--BASE GFX-->
      <!-- line layer 1 -->
      <g>
        <path
          id="svg_3a"
          fill="none"
          stroke-width="10"
          stroke="#233034"
          d="M972,0v52"
        ></path>
        <path
          id="svg_3b"
          fill="none"
          stroke-width="10"
          stroke="#233034"
          d="M554,513h234V242h184v-62"
        ></path>
        <path
          id="svg_3c"
          fill="none"
          stroke-width="10"
          stroke="#233034"
          d="M64,513H0"
        ></path>

        <!-- your outcome starts-->
        <g class="outcome-title">
          <!-- Y -->
          <path
            fill="none"
            d="M994.7,64.8l-16.3,28.5v18.3h-15.3V93.3l-16.2-28.5h17l6.9,15.8l7-15.8H994.7z"
          ></path>
          <!-- O -->
          <path
            fill="#FFFFFF"
            d="M1017.5,112.4c-14.6,0-25.4-8.9-25.4-24.1c0-15.3,10.9-24.2,25.4-24.2c14.6,0,25.4,9,25.4,24.2
					C1042.9,103.5,1032.1,112.4,1017.5,112.4z M1017.5,77c-6.1,0-10,4.5-10,10.9c0,6.4,3.9,10.9,10,10.9c6.1,0,10-4.5,10-10.9
					C1027.4,81.5,1023.6,77,1017.5,77z"
          ></path>
          <!-- U -->
          <path
            fill="#FFFFFF"
            d="M1090.1,91.6c0,7.5-1.7,11.9-5.1,15.3c-3.4,3.4-8.8,5.5-16.3,5.5c-7.5,0-12.9-2.1-16.3-5.5
					c-3.4-3.4-5.1-7.8-5.1-15.3V64.8h15.4v27.5c0,2.8,0.5,4.1,1.6,5.1c1,1,2.4,1.7,4.4,1.7c2,0,3.4-0.7,4.4-1.7c1-1,1.5-2.4,1.5-5.1
					V64.8h15.5V91.6z"
          ></path>
          <!-- R -->
          <path
            fill="#FFFFFF"
            d="M1138.9,111.6h-17.6l-7.5-15.6h-2v15.6h-15.3V64.8h20.3c5.8,0,10.2,1,13.6,3.4c3.4,2.4,5.8,6.4,5.8,11.5
					c0,9.5-5.8,12.9-7.8,14.1L1138.9,111.6z M1119.1,77.2c-0.7-0.5-1.7-0.9-3.4-0.9h-3.9v8.1h3.9c1.7,0,2.8-0.3,3.4-0.8
					c0.7-0.5,1.7-1.2,1.7-3.3S1119.7,77.7,1119.1,77.2z"
          ></path>
          <!-- O -->
          <path
            fill="#FFFFFF"
            d="M975.1,167.4c-14.6,0-25.4-8.9-25.4-24.1c0-15.3,10.9-24.2,25.4-24.2c14.6,0,25.4,9,25.4,24.2
					C1000.5,158.5,989.6,167.4,975.1,167.4z M975.1,132c-6.1,0-10,4.5-10,10.9c0,6.4,3.9,10.9,10,10.9c6.1,0,10-4.5,10-10.9
					C985,136.5,981.2,132,975.1,132z"
          ></path>
          <!-- U -->
          <path
            fill="#FFFFFF"
            d="M1047.7,146.6c0,7.5-1.7,11.9-5.1,15.3c-3.4,3.4-8.8,5.5-16.3,5.5c-7.5,0-12.9-2.1-16.3-5.5
					c-3.4-3.4-5.1-7.8-5.1-15.3v-26.8h15.4v27.5c0,2.8,0.5,4.1,1.6,5.1c1,1,2.4,1.7,4.4,1.7c2,0,3.4-0.7,4.4-1.7c1-1,1.5-2.4,1.5-5.1
					v-27.5h15.5V146.6z"
          ></path>
          <!-- T -->
          <path
            fill="#FFFFFF"
            d="M1088.1,131.7h-11.1v34.9h-15.3v-34.9h-11v-11.9h37.4V131.7z"
          ></path>
          <!--C  -->
          <path
            fill="#FFFFFF"
            d="M1128.1,161.5c-1.7,1.7-6.4,5.9-16.6,5.9c-13.9,0-25.1-8.5-25.1-24.1c0-15.6,11.2-24.1,25.1-24.1
					c10.5,0,15.6,4.4,15.6,4.4l-4.1,12.9c0,0-4.7-4.1-10.5-4.1c-5.8,0-10.7,3.4-10.7,10.7c0,7.3,5.3,10.5,10.7,10.5
					c5.4,0,9.2-2.2,11.2-4.3L1128.1,161.5z"
          ></path>
          <!-- O -->
          <path
            fill="#FFFFFF"
            d="M1153.6,167.4c-14.6,0-25.4-8.9-25.4-24.1c0-15.3,10.9-24.2,25.4-24.2s25.4,9,25.4,24.2
					C1179,158.5,1168.2,167.4,1153.6,167.4z M1153.6,132c-6.1,0-10,4.5-10,10.9c0,6.4,3.9,10.9,10,10.9c6.1,0,10-4.5,10-10.9
					C1163.6,136.5,1159.7,132,1153.6,132z"
          ></path>
          <!-- M -->
          <path
            fill="#FFFFFF"
            d="M1239.1,166.6H1224l-0.5-26.8l-6.1,26.8h-13.2l-6.1-26.8l-0.5,26.8h-15.1l2.7-46.8h19.7l5.9,25.4l6-25.4
					h19.7L1239.1,166.6z"
          ></path>
          <!-- E -->
          <path
            fill="#FFFFFF"
            d="M1278.5,166.6h-33.9v-46.8h33.2v12.1h-18v5.1h17v12h-17v5.4h18.6V166.6z"
          ></path>
        </g>
        <!-- your outcome ends-->

        <!-- efficiency layer 1 starts-->
        <g class="eff-title">
          <path
            fill="#233034"
            d="M122.3,540.6h-40v-55.2h39.2v14.2h-21.2v6h20v14.2h-20v6.4h22V540.6z"
          ></path>
          <path
            fill="#233034"
            d="M169.1,499.6h-20.4v8.6h19.2v14.2h-19.2v18.2h-18v-55.2h38.4V499.6z"
          ></path>
          <path
            fill="#233034"
            d="M215.1,499.6h-20.4v8.6h19.2v14.2h-19.2v18.2h-18v-55.2h38.4V499.6z"
          ></path>
          <path fill="#233034" d="M240.7,540.6h-18.1v-55.2h18.1V540.6z"></path>
          <path
            fill="#233034"
            d="M297.5,534.6c-2,2-7.6,7-19.6,7c-16.4,0-29.6-10.1-29.6-28.5s13.2-28.5,29.6-28.5c12.4,0,18.4,5.2,18.4,5.2
					l-4.8,15.2c0,0-5.6-4.8-12.4-4.8c-6.8,0-12.6,4-12.6,12.6c0,8.6,6.2,12.4,12.6,12.4c6.4,0,10.8-2.6,13.2-5L297.5,534.6z"
          ></path>
          <path fill="#233034" d="M321.6,540.6h-18.1v-55.2h18.1V540.6z"></path>
          <path
            fill="#233034"
            d="M371.6,540.6h-40v-55.2h39.2v14.2h-21.2v6h20v14.2h-20v6.4h22V540.6z"
          ></path>
          <path
            fill="#233034"
            d="M432.8,540.6H414l-16.8-30.8c0,0,0.4,6,0.4,10v20.8H380v-55.2h19.6l16,30.8c0,0-0.4-6-0.4-10v-20.8h17.6
					V540.6z"
          ></path>
          <path
            fill="#233034"
            d="M489.6,534.6c-2,2-7.6,7-19.6,7c-16.4,0-29.6-10.1-29.6-28.5s13.2-28.5,29.6-28.5c12.4,0,18.4,5.2,18.4,5.2
					l-4.8,15.2c0,0-5.6-4.8-12.4-4.8c-6.8,0-12.6,4-12.6,12.6c0,8.6,6.2,12.4,12.6,12.4c6.4,0,10.8-2.6,13.2-5L489.6,534.6z"
          ></path>
          <path
            fill="#233034"
            d="M546.4,485.4L527.2,519v21.6h-18.1V519L490,485.4h20l8.2,18.6l8.2-18.6H546.4z"
          ></path>
        </g>
        <!-- efficiency layer 1 ends-->
      </g>

      <!--MASKED GFX-->
      <!-- line layer 2 -->
      <g>
        <path
          id="svg_4a"
          fill="none"
          stroke-width="10"
          stroke="#3AAFA9"
          d="M972,0v52"
        ></path>
        <path
          id="svg_4b"
          fill="none"
          stroke-width="10"
          stroke="#3AAFA9"
          d="M554,513h234V242h184v-62"
        ></path>
        <path
          id="svg_4c"
          fill="none"
          stroke-width="10"
          stroke="#3AAFA9"
          d="M64,513H0"
        ></path>

        <!-- efficiency layer 2 starts-->
        <path
          id="svg_5a"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M122.3,540.6h-40v-55.2h39.2v14.2h-21.2v6h20v14.2h-20v6.4h22V540.6z"
        ></path>
        <path
          id="svg_5b"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M169.1,499.6h-20.4v8.6h19.2v14.2h-19.2v18.2h-18v-55.2h38.4V499.6z"
        ></path>
        <path
          id="svg_5c"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M215.1,499.6h-20.4v8.6h19.2v14.2h-19.2v18.2h-18v-55.2h38.4V499.6z"
        ></path>
        <path
          id="svg_5d"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M240.7,540.6h-18.1v-55.2h18.1V540.6z"
        ></path>
        <path
          id="svg_5e"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M297.5,534.6c-2,2-7.6,7-19.6,7c-16.4,0-29.6-10.1-29.6-28.5s13.2-28.5,29.6-28.5c12.4,0,18.4,5.2,18.4,5.2
					l-4.8,15.2c0,0-5.6-4.8-12.4-4.8c-6.8,0-12.6,4-12.6,12.6c0,8.6,6.2,12.4,12.6,12.4c6.4,0,10.8-2.6,13.2-5L297.5,534.6z"
        ></path>
        <path
          id="svg_5f"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M321.6,540.6h-18.1v-55.2h18.1V540.6z"
        ></path>
        <path
          id="svg_5g"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M371.6,540.6h-40v-55.2h39.2v14.2h-21.2v6h20v14.2h-20v6.4h22V540.6z"
        ></path>
        <path
          id="svg_5h"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M432.8,540.6H414l-16.8-30.8c0,0,0.4,6,0.4,10v20.8H380v-55.2h19.6l16,30.8c0,0-0.4-6-0.4-10v-20.8h17.6
					V540.6z"
        ></path>
        <path
          id="svg_5i"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M489.6,534.6c-2,2-7.6,7-19.6,7c-16.4,0-29.6-10.1-29.6-28.5s13.2-28.5,29.6-28.5c12.4,0,18.4,5.2,18.4,5.2
					l-4.8,15.2c0,0-5.6-4.8-12.4-4.8c-6.8,0-12.6,4-12.6,12.6c0,8.6,6.2,12.4,12.6,12.4c6.4,0,10.8-2.6,13.2-5L489.6,534.6z"
        ></path>
        <path
          id="svg_5j"
          fill="none"
          stroke-width="5"
          stroke="#3aafa9"
          d="M546.4,485.4L527.2,519v21.6h-18.1V519L490,485.4h20l8.2,18.6l8.2-18.6H546.4z"
        ></path>
        <!-- efficiency layer 2 ends-->
      </g>
    </svg>
  </section>
</template>

<script>
import { mapGetters, mapActions } from "vuex";

export default {
  name: "Outcome",
  data() {
    return {
      svg4a: 0,
      svg4b: 0,
      svg4c: 0,
      svg5a: 0,
      svg5b: 0,
      svg5c: 0,
      svg5d: 0,
      svg5e: 0,
      svg5f: 0,
      svg5g: 0,
      svg5h: 0,
      svg5i: 0,
      svg5j: 0
    };
  },
  computed: mapGetters(["docHeightPerc"]),
  methods: {
    ...mapActions(["getDocumentHeightPercentage"]),

    //event on scroll
    handleScroll() {
      this.getDocumentHeightPercentage();

      if (this.docHeightPerc < 30) {
        this.svg4a.setAttribute(
          "stroke-dashoffset",
          this.svg4a.getTotalLength()
        );
      } else if (this.docHeightPerc >= 30 && this.docHeightPerc <= 34) {
        this.drawPath(this.svg4a, 30, 34);
      } else if (this.docHeightPerc >= 35 && this.docHeightPerc <= 38) {
        this.svg4a.setAttribute("stroke-dashoffset", 0);
        this.svg4b.setAttribute(
          "stroke-dashoffset",
          this.svg4b.getTotalLength()
        );
        this.svg4c.setAttribute(
          "stroke-dashoffset",
          this.svg4c.getTotalLength()
        );
      } else if (this.docHeightPerc >= 39 && this.docHeightPerc <= 50) {
        this.drawPath(this.svg4b, 39, 50, -1);
        this.svg5j.setAttribute(
          "stroke-dashoffset",
          this.svg5j.getTotalLength()
        );
      } else if (this.docHeightPerc >= 51 && this.docHeightPerc <= 70) {
        this.svg4a.setAttribute("stroke-dashoffset", 0);
        this.svg4b.setAttribute("stroke-dashoffset", 0);
        this.svg4c.setAttribute(
          "stroke-dashoffset",
          this.svg4c.getTotalLength()
        );

        if (this.docHeightPerc >= 51 && this.docHeightPerc <= 52) {
          this.drawPath(this.svg5j, 51, 52);
        } else if (this.docHeightPerc >= 53 && this.docHeightPerc <= 54) {
          this.drawPath(this.svg5i, 53, 54);
        } else if (this.docHeightPerc >= 55 && this.docHeightPerc <= 56) {
          this.drawPath(this.svg5h, 55, 56);
        } else if (this.docHeightPerc >= 57 && this.docHeightPerc <= 58) {
          this.drawPath(this.svg5g, 57, 58);
        } else if (this.docHeightPerc >= 59 && this.docHeightPerc <= 60) {
          this.drawPath(this.svg5f, 59, 60);
        } else if (this.docHeightPerc >= 61 && this.docHeightPerc <= 62) {
          this.drawPath(this.svg5e, 61, 62);
        } else if (this.docHeightPerc >= 63 && this.docHeightPerc <= 64) {
          this.drawPath(this.svg5d, 63, 64);
        } else if (this.docHeightPerc >= 65 && this.docHeightPerc <= 66) {
          this.drawPath(this.svg5c, 65, 66);
        } else if (this.docHeightPerc >= 67 && this.docHeightPerc <= 68) {
          this.drawPath(this.svg5b, 67, 68);
        } else if (this.docHeightPerc >= 69 && this.docHeightPerc <= 70) {
          this.drawPath(this.svg5a, 69, 70);
        }
      } else if (this.docHeightPerc >= 71 && this.docHeightPerc <= 75) {
        this.drawPath(this.svg4c, 71, 75);
      }
    },

    //draw line
    drawPath(el, startPerc = 0, endPerc, sign = 1) {
      var drawLen = 0;
      var pathLen = el.getTotalLength();
      var scrollPerc = (this.docHeightPerc - startPerc) / (endPerc - startPerc);
      drawLen = pathLen - pathLen * scrollPerc;
      el.setAttribute("stroke-dashoffset", sign * drawLen);
    }
  },
  mounted() {
    this.getDocumentHeightPercentage();
    window.addEventListener("scroll", this.handleScroll);

    this.svg4a = document.querySelector("#svg_4a");
    this.svg4a.setAttribute("stroke-dasharray", this.svg4a.getTotalLength());
    this.svg4a.setAttribute("stroke-dashoffset", this.svg4a.getTotalLength());

    this.svg4b = document.querySelector("#svg_4b");
    this.svg4b.setAttribute("stroke-dasharray", this.svg4b.getTotalLength());
    this.svg4b.setAttribute("stroke-dashoffset", this.svg4b.getTotalLength());

    this.svg4c = document.querySelector("#svg_4c");
    this.svg4c.setAttribute("stroke-dasharray", this.svg4c.getTotalLength());
    this.svg4c.setAttribute("stroke-dashoffset", this.svg4c.getTotalLength());

    this.svg5a = document.querySelector("#svg_5a");
    this.svg5a.setAttribute("stroke-dasharray", this.svg5a.getTotalLength());
    this.svg5a.setAttribute("stroke-dashoffset", this.svg5a.getTotalLength());

    this.svg5b = document.querySelector("#svg_5b");
    this.svg5b.setAttribute("stroke-dasharray", this.svg5b.getTotalLength());
    this.svg5b.setAttribute("stroke-dashoffset", this.svg5b.getTotalLength());

    this.svg5c = document.querySelector("#svg_5c");
    this.svg5c.setAttribute("stroke-dasharray", this.svg5c.getTotalLength());
    this.svg5c.setAttribute("stroke-dashoffset", this.svg5c.getTotalLength());

    this.svg5d = document.querySelector("#svg_5d");
    this.svg5d.setAttribute("stroke-dasharray", this.svg5d.getTotalLength());
    this.svg5d.setAttribute("stroke-dashoffset", this.svg5d.getTotalLength());

    this.svg5e = document.querySelector("#svg_5e");
    this.svg5e.setAttribute("stroke-dasharray", this.svg5e.getTotalLength());
    this.svg5e.setAttribute("stroke-dashoffset", this.svg5e.getTotalLength());

    this.svg5f = document.querySelector("#svg_5f");
    this.svg5f.setAttribute("stroke-dasharray", this.svg5f.getTotalLength());
    this.svg5f.setAttribute("stroke-dashoffset", this.svg5f.getTotalLength());

    this.svg5g = document.querySelector("#svg_5g");
    this.svg5g.setAttribute("stroke-dasharray", this.svg5g.getTotalLength());
    this.svg5g.setAttribute("stroke-dashoffset", this.svg5g.getTotalLength());

    this.svg5h = document.querySelector("#svg_5h");
    this.svg5h.setAttribute("stroke-dasharray", this.svg5h.getTotalLength());
    this.svg5h.setAttribute("stroke-dashoffset", this.svg5h.getTotalLength());

    this.svg5i = document.querySelector("#svg_5i");
    this.svg5i.setAttribute("stroke-dasharray", this.svg5i.getTotalLength());
    this.svg5i.setAttribute("stroke-dashoffset", this.svg5i.getTotalLength());

    this.svg5j = document.querySelector("#svg_5j");
    this.svg5j.setAttribute("stroke-dasharray", this.svg5j.getTotalLength());
    this.svg5j.setAttribute("stroke-dashoffset", this.svg5j.getTotalLength());
  },
  destroyed() {
    window.removeEventListener("scroll", this.handleScroll);
  }
};
</script>

<style>
#section2 {
  position: relative;
  height: 140vh;
  width: 100%;
  bottom: 0;
  top: 100vh;
  background-color: #27353a;
}
</style>